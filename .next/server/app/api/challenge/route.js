"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/challenge/route";
exports.ids = ["app/api/challenge/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "./action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "./request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "./static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchallenge%2Froute&page=%2Fapi%2Fchallenge%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchallenge%2Froute.ts&appDir=D%3A%5CABtalks%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CABtalks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchallenge%2Froute&page=%2Fapi%2Fchallenge%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchallenge%2Froute.ts&appDir=D%3A%5CABtalks%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CABtalks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_ABtalks_app_api_challenge_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/challenge/route.ts */ \"(rsc)/./app/api/challenge/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/challenge/route\",\n        pathname: \"/api/challenge\",\n        filename: \"route\",\n        bundlePath: \"app/api/challenge/route\"\n    },\n    resolvedPagePath: \"D:\\\\ABtalks\\\\app\\\\api\\\\challenge\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_ABtalks_app_api_challenge_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/challenge/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGFsbGVuZ2UlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmNoYWxsZW5nZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmNoYWxsZW5nZSUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDQUJ0YWxrcyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RCUzQSU1Q0FCdGFsa3MmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ047QUFDdkU7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hYnRhbGtzLz9lMzgxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXEFCdGFsa3NcXFxcYXBwXFxcXGFwaVxcXFxjaGFsbGVuZ2VcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NoYWxsZW5nZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NoYWxsZW5nZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2hhbGxlbmdlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxcQUJ0YWxrc1xcXFxhcHBcXFxcYXBpXFxcXGNoYWxsZW5nZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2hhbGxlbmdlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchallenge%2Froute&page=%2Fapi%2Fchallenge%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchallenge%2Froute.ts&appDir=D%3A%5CABtalks%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CABtalks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/challenge/route.ts":
/*!************************************!*\
  !*** ./app/api/challenge/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_domain_progress__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/domain-progress */ \"(rsc)/./lib/domain-progress.ts\");\n\n\n\n\nconst VALID_DOMAINS = [\n    \"SE\",\n    \"ML\",\n    \"AI\"\n];\nasync function GET(request) {\n    const session = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getSession)();\n    if (!session) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Unauthorized\"\n        }, {\n            status: 401\n        });\n    }\n    const { searchParams } = new URL(request.url);\n    const domainParam = searchParams.get(\"domain\");\n    const user = await _lib_db__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n        where: {\n            id: session.userId\n        },\n        select: {\n            selectedDomain: true\n        }\n    });\n    if (!user) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"User not found\"\n        }, {\n            status: 404\n        });\n    }\n    const domain = domainParam && VALID_DOMAINS.includes(domainParam) ? domainParam : user.selectedDomain;\n    const [progress, challenges, challengeSubs] = await Promise.all([\n        (0,_lib_domain_progress__WEBPACK_IMPORTED_MODULE_3__.getOrCreateDomainProgress)(session.userId, domain),\n        _lib_db__WEBPACK_IMPORTED_MODULE_2__.prisma.challenge.findMany({\n            where: {\n                domain\n            },\n            orderBy: {\n                dayNumber: \"asc\"\n            }\n        }),\n        _lib_db__WEBPACK_IMPORTED_MODULE_2__.prisma.submission.findMany({\n            where: {\n                userId: session.userId,\n                challengeId: {\n                    not: null\n                },\n                challenge: {\n                    domain\n                }\n            },\n            select: {\n                challenge: {\n                    select: {\n                        dayNumber: true\n                    }\n                }\n            }\n        })\n    ]);\n    const solvedDayNumbers = new Set(challengeSubs.filter((s)=>s.challenge).map((s)=>s.challenge.dayNumber));\n    const challengeByDay = new Map(challenges.map((c)=>[\n            c.dayNumber,\n            c\n        ]));\n    const maxUnlocked = progress.currentDay;\n    const list = Array.from({\n        length: 60\n    }, (_, i)=>{\n        const dayNumber = i + 1;\n        const challenge = challengeByDay.get(dayNumber);\n        return {\n            id: challenge?.id ?? null,\n            dayNumber,\n            category: challenge?.category ?? null,\n            difficulty: challenge?.difficulty ?? null,\n            description: challenge?.description ?? null,\n            industryNote: challenge?.industryNote ?? null,\n            solved: solvedDayNumbers.has(dayNumber),\n            unlocked: dayNumber <= maxUnlocked,\n            configured: !!challenge\n        };\n    });\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        challenges: list,\n        domain,\n        currentDay: progress.currentDay,\n        currentStreak: progress.currentStreak,\n        longestStreak: progress.longestStreak,\n        defaultDomain: user.selectedDomain\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTb0MsYUFBYTtRQUNyQ0MsZUFBZXJDLFNBQVNxQyxhQUFhO1FBQ3JDQyxlQUFlL0MsS0FBS00sY0FBYztJQUNwQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWJ0YWxrcy8uL2FwcC9hcGkvY2hhbGxlbmdlL3JvdXRlLnRzP2JiY2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSBcIkAvbGliL2F1dGhcIjtcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gXCJAL2xpYi9kYlwiO1xuaW1wb3J0IHsgZ2V0T3JDcmVhdGVEb21haW5Qcm9ncmVzcyB9IGZyb20gXCJAL2xpYi9kb21haW4tcHJvZ3Jlc3NcIjtcblxuY29uc3QgVkFMSURfRE9NQUlOUyA9IFtcIlNFXCIsIFwiTUxcIiwgXCJBSVwiXSBhcyBjb25zdDtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKCk7XG4gIGlmICghc2Vzc2lvbikge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIlVuYXV0aG9yaXplZFwiIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gIH1cbiAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICBjb25zdCBkb21haW5QYXJhbSA9IHNlYXJjaFBhcmFtcy5nZXQoXCJkb21haW5cIik7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogc2Vzc2lvbi51c2VySWQgfSxcbiAgICBzZWxlY3Q6IHsgc2VsZWN0ZWREb21haW46IHRydWUgfSxcbiAgfSk7XG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIlVzZXIgbm90IGZvdW5kXCIgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgfVxuICBjb25zdCBkb21haW4gPVxuICAgIGRvbWFpblBhcmFtICYmIFZBTElEX0RPTUFJTlMuaW5jbHVkZXMoZG9tYWluUGFyYW0gYXMgKHR5cGVvZiBWQUxJRF9ET01BSU5TKVtudW1iZXJdKVxuICAgICAgPyAoZG9tYWluUGFyYW0gYXMgKHR5cGVvZiBWQUxJRF9ET01BSU5TKVtudW1iZXJdKVxuICAgICAgOiB1c2VyLnNlbGVjdGVkRG9tYWluO1xuXG4gIGNvbnN0IFtwcm9ncmVzcywgY2hhbGxlbmdlcywgY2hhbGxlbmdlU3Vic10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0T3JDcmVhdGVEb21haW5Qcm9ncmVzcyhzZXNzaW9uLnVzZXJJZCwgZG9tYWluKSxcbiAgICBwcmlzbWEuY2hhbGxlbmdlLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IGRvbWFpbiB9LFxuICAgICAgb3JkZXJCeTogeyBkYXlOdW1iZXI6IFwiYXNjXCIgfSxcbiAgICB9KSxcbiAgICBwcmlzbWEuc3VibWlzc2lvbi5maW5kTWFueSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICB1c2VySWQ6IHNlc3Npb24udXNlcklkLFxuICAgICAgICBjaGFsbGVuZ2VJZDogeyBub3Q6IG51bGwgfSxcbiAgICAgICAgY2hhbGxlbmdlOiB7IGRvbWFpbiB9LFxuICAgICAgfSxcbiAgICAgIHNlbGVjdDogeyBjaGFsbGVuZ2U6IHsgc2VsZWN0OiB7IGRheU51bWJlcjogdHJ1ZSB9IH0gfSxcbiAgICB9KSxcbiAgXSk7XG5cbiAgY29uc3Qgc29sdmVkRGF5TnVtYmVycyA9IG5ldyBTZXQoXG4gICAgY2hhbGxlbmdlU3Vic1xuICAgICAgLmZpbHRlcigocykgPT4gcy5jaGFsbGVuZ2UpXG4gICAgICAubWFwKChzKSA9PiAocy5jaGFsbGVuZ2UgYXMgeyBkYXlOdW1iZXI6IG51bWJlciB9KS5kYXlOdW1iZXIpXG4gICk7XG4gIGNvbnN0IGNoYWxsZW5nZUJ5RGF5ID0gbmV3IE1hcChjaGFsbGVuZ2VzLm1hcCgoYykgPT4gW2MuZGF5TnVtYmVyLCBjXSkpO1xuICBjb25zdCBtYXhVbmxvY2tlZCA9IHByb2dyZXNzLmN1cnJlbnREYXk7XG5cbiAgY29uc3QgbGlzdCA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDYwIH0sIChfLCBpKSA9PiB7XG4gICAgY29uc3QgZGF5TnVtYmVyID0gaSArIDE7XG4gICAgY29uc3QgY2hhbGxlbmdlID0gY2hhbGxlbmdlQnlEYXkuZ2V0KGRheU51bWJlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBjaGFsbGVuZ2U/LmlkID8/IG51bGwsXG4gICAgICBkYXlOdW1iZXIsXG4gICAgICBjYXRlZ29yeTogY2hhbGxlbmdlPy5jYXRlZ29yeSA/PyBudWxsLFxuICAgICAgZGlmZmljdWx0eTogY2hhbGxlbmdlPy5kaWZmaWN1bHR5ID8/IG51bGwsXG4gICAgICBkZXNjcmlwdGlvbjogY2hhbGxlbmdlPy5kZXNjcmlwdGlvbiA/PyBudWxsLFxuICAgICAgaW5kdXN0cnlOb3RlOiBjaGFsbGVuZ2U/LmluZHVzdHJ5Tm90ZSA/PyBudWxsLFxuICAgICAgc29sdmVkOiBzb2x2ZWREYXlOdW1iZXJzLmhhcyhkYXlOdW1iZXIpLFxuICAgICAgdW5sb2NrZWQ6IGRheU51bWJlciA8PSBtYXhVbmxvY2tlZCxcbiAgICAgIGNvbmZpZ3VyZWQ6ICEhY2hhbGxlbmdlLFxuICAgIH07XG4gIH0pO1xuXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgY2hhbGxlbmdlczogbGlzdCxcbiAgICBkb21haW4sXG4gICAgY3VycmVudERheTogcHJvZ3Jlc3MuY3VycmVudERheSxcbiAgICBjdXJyZW50U3RyZWFrOiBwcm9ncmVzcy5jdXJyZW50U3RyZWFrLFxuICAgIGxvbmdlc3RTdHJlYWs6IHByb2dyZXNzLmxvbmdlc3RTdHJlYWssXG4gICAgZGVmYXVsdERvbWFpbjogdXNlci5zZWxlY3RlZERvbWFpbixcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0U2Vzc2lvbiIsInByaXNtYSIsImdldE9yQ3JlYXRlRG9tYWluUHJvZ3Jlc3MiLCJWQUxJRF9ET01BSU5TIiwiR0VUIiwicmVxdWVzdCIsInNlc3Npb24iLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJkb21haW5QYXJhbSIsImdldCIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsInVzZXJJZCIsInNlbGVjdCIsInNlbGVjdGVkRG9tYWluIiwiZG9tYWluIiwiaW5jbHVkZXMiLCJwcm9ncmVzcyIsImNoYWxsZW5nZXMiLCJjaGFsbGVuZ2VTdWJzIiwiUHJvbWlzZSIsImFsbCIsImNoYWxsZW5nZSIsImZpbmRNYW55Iiwib3JkZXJCeSIsImRheU51bWJlciIsInN1Ym1pc3Npb24iLCJjaGFsbGVuZ2VJZCIsIm5vdCIsInNvbHZlZERheU51bWJlcnMiLCJTZXQiLCJmaWx0ZXIiLCJzIiwibWFwIiwiY2hhbGxlbmdlQnlEYXkiLCJNYXAiLCJjIiwibWF4VW5sb2NrZWQiLCJjdXJyZW50RGF5IiwibGlzdCIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIl8iLCJpIiwiY2F0ZWdvcnkiLCJkaWZmaWN1bHR5IiwiZGVzY3JpcHRpb24iLCJpbmR1c3RyeU5vdGUiLCJzb2x2ZWQiLCJoYXMiLCJ1bmxvY2tlZCIsImNvbmZpZ3VyZWQiLCJjdXJyZW50U3RyZWFrIiwibG9uZ2VzdFN0cmVhayIsImRlZmF1bHREb21haW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/challenge/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearSession: () => (/* binding */ clearSession),\n/* harmony export */   createToken: () => (/* binding */ createToken),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   setSession: () => (/* binding */ setSession),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./db */ \"(rsc)/./lib/db.ts\");\n\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"default-secret-change-me\";\nconst COOKIE_NAME = \"abtalks-token\";\n// JWT expiry: 1 hour in seconds; override with JWT_EXPIRY env (e.g. 3600 or 604800 for 7d)\nconst JWT_EXPIRY_SECONDS = process.env.JWT_EXPIRY ? Number(process.env.JWT_EXPIRY) : 60 * 60; // 1h default\nconst MAX_AGE = 60 * 60; // 1 hour cookie; refresh token flow can extend session\nasync function hashPassword(password) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().hash(password, 12);\n}\nasync function verifyPassword(password, hashed) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().compare(password, hashed);\n}\nfunction createToken(payload) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, JWT_SECRET, {\n        expiresIn: JWT_EXPIRY_SECONDS\n    });\n}\nfunction verifyToken(token) {\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n        return {\n            userId: decoded.userId,\n            email: decoded.email,\n            role: decoded.role\n        };\n    } catch  {\n        return null;\n    }\n}\nasync function getSession() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const token = cookieStore.get(COOKIE_NAME)?.value;\n    if (!token) return null;\n    return verifyToken(token);\n}\nasync function setSession(token) {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    cookieStore.set(COOKIE_NAME, token, {\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"lax\",\n        maxAge: MAX_AGE,\n        path: \"/\"\n    });\n}\nasync function clearSession() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    cookieStore.delete(COOKIE_NAME);\n}\nasync function getCurrentUser() {\n    const session = await getSession();\n    if (!session) return null;\n    return _db__WEBPACK_IMPORTED_MODULE_3__.prisma.user.findUnique({\n        where: {\n            id: session.userId\n        },\n        select: {\n            id: true,\n            name: true,\n            email: true,\n            selectedDomain: true,\n            joinedAt: true,\n            role: true\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUErQjtBQUNRO0FBQ1Q7QUFDQTtBQUU5QixNQUFNSSxhQUFhQyxRQUFRQyxHQUFHLENBQUNGLFVBQVUsSUFBSTtBQUM3QyxNQUFNRyxjQUFjO0FBQ3BCLDJGQUEyRjtBQUMzRixNQUFNQyxxQkFBcUJILFFBQVFDLEdBQUcsQ0FBQ0csVUFBVSxHQUFHQyxPQUFPTCxRQUFRQyxHQUFHLENBQUNHLFVBQVUsSUFBSSxLQUFLLElBQUksYUFBYTtBQUMzRyxNQUFNRSxVQUFVLEtBQUssSUFBSSx1REFBdUQ7QUFFekUsZUFBZUMsYUFBYUMsUUFBZ0I7SUFDakQsT0FBT1gsb0RBQVcsQ0FBQ1csVUFBVTtBQUMvQjtBQUVPLGVBQWVFLGVBQ3BCRixRQUFnQixFQUNoQkcsTUFBYztJQUVkLE9BQU9kLHVEQUFjLENBQUNXLFVBQVVHO0FBQ2xDO0FBUU8sU0FBU0UsWUFBWUMsT0FBbUI7SUFDN0MsT0FBT25CLHdEQUFRLENBQUNtQixTQUFTZixZQUFZO1FBQUVpQixXQUFXYjtJQUFtQjtBQUN2RTtBQUVPLFNBQVNjLFlBQVlDLEtBQWE7SUFDdkMsSUFBSTtRQUNGLE1BQU1DLFVBQVV4QiwwREFBVSxDQUFDdUIsT0FBT25CO1FBQ2xDLE9BQU87WUFDTHNCLFFBQVFGLFFBQVFFLE1BQU07WUFDdEJDLE9BQU9ILFFBQVFHLEtBQUs7WUFDcEJDLE1BQU1KLFFBQVFJLElBQUk7UUFDcEI7SUFDRixFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRjtBQUVPLGVBQWVDO0lBQ3BCLE1BQU1DLGNBQWMsTUFBTTdCLHFEQUFPQTtJQUNqQyxNQUFNc0IsUUFBUU8sWUFBWUMsR0FBRyxDQUFDeEIsY0FBY3lCO0lBQzVDLElBQUksQ0FBQ1QsT0FBTyxPQUFPO0lBQ25CLE9BQU9ELFlBQVlDO0FBQ3JCO0FBRU8sZUFBZVUsV0FBV1YsS0FBYTtJQUM1QyxNQUFNTyxjQUFjLE1BQU03QixxREFBT0E7SUFDakM2QixZQUFZSSxHQUFHLENBQUMzQixhQUFhZ0IsT0FBTztRQUNsQ1ksVUFBVTtRQUNWQyxRQUFRL0Isa0JBQXlCO1FBQ2pDZ0MsVUFBVTtRQUNWQyxRQUFRM0I7UUFDUjRCLE1BQU07SUFDUjtBQUNGO0FBRU8sZUFBZUM7SUFDcEIsTUFBTVYsY0FBYyxNQUFNN0IscURBQU9BO0lBQ2pDNkIsWUFBWVcsTUFBTSxDQUFDbEM7QUFDckI7QUFFTyxlQUFlbUM7SUFDcEIsTUFBTUMsVUFBVSxNQUFNZDtJQUN0QixJQUFJLENBQUNjLFNBQVMsT0FBTztJQUNyQixPQUFPeEMsdUNBQU1BLENBQUN5QyxJQUFJLENBQUNDLFVBQVUsQ0FBQztRQUM1QkMsT0FBTztZQUFFQyxJQUFJSixRQUFRakIsTUFBTTtRQUFDO1FBQzVCc0IsUUFBUTtZQUNORCxJQUFJO1lBQ0pFLE1BQU07WUFDTnRCLE9BQU87WUFDUHVCLGdCQUFnQjtZQUNoQkMsVUFBVTtZQUNWdkIsTUFBTTtRQUNSO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FidGFsa3MvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSBcIm5leHQvaGVhZGVyc1wiO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRqc1wiO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiLi9kYlwiO1xyXG5cclxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgXCJkZWZhdWx0LXNlY3JldC1jaGFuZ2UtbWVcIjtcclxuY29uc3QgQ09PS0lFX05BTUUgPSBcImFidGFsa3MtdG9rZW5cIjtcclxuLy8gSldUIGV4cGlyeTogMSBob3VyIGluIHNlY29uZHM7IG92ZXJyaWRlIHdpdGggSldUX0VYUElSWSBlbnYgKGUuZy4gMzYwMCBvciA2MDQ4MDAgZm9yIDdkKVxyXG5jb25zdCBKV1RfRVhQSVJZX1NFQ09ORFMgPSBwcm9jZXNzLmVudi5KV1RfRVhQSVJZID8gTnVtYmVyKHByb2Nlc3MuZW52LkpXVF9FWFBJUlkpIDogNjAgKiA2MDsgLy8gMWggZGVmYXVsdFxyXG5jb25zdCBNQVhfQUdFID0gNjAgKiA2MDsgLy8gMSBob3VyIGNvb2tpZTsgcmVmcmVzaCB0b2tlbiBmbG93IGNhbiBleHRlbmQgc2Vzc2lvblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc2hQYXNzd29yZChwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICByZXR1cm4gYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEyKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkKFxyXG4gIHBhc3N3b3JkOiBzdHJpbmcsXHJcbiAgaGFzaGVkOiBzdHJpbmdcclxuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBoYXNoZWQpO1xyXG59XHJcblxyXG50eXBlIEp3dFBheWxvYWQgPSB7XHJcbiAgdXNlcklkOiBzdHJpbmc7XHJcbiAgZW1haWw6IHN0cmluZztcclxuICByb2xlOiBcIlVTRVJcIiB8IFwiQURNSU5cIjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUb2tlbihwYXlsb2FkOiBKd3RQYXlsb2FkKTogc3RyaW5nIHtcclxuICByZXR1cm4gand0LnNpZ24ocGF5bG9hZCwgSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46IEpXVF9FWFBJUllfU0VDT05EUyB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeVRva2VuKHRva2VuOiBzdHJpbmcpOiBKd3RQYXlsb2FkIHwgbnVsbCB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKSBhcyBKd3RQYXlsb2FkO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXNlcklkOiBkZWNvZGVkLnVzZXJJZCxcclxuICAgICAgZW1haWw6IGRlY29kZWQuZW1haWwsXHJcbiAgICAgIHJvbGU6IGRlY29kZWQucm9sZSxcclxuICAgIH07XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXNzaW9uKCk6IFByb21pc2U8Snd0UGF5bG9hZCB8IG51bGw+IHtcclxuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICBjb25zdCB0b2tlbiA9IGNvb2tpZVN0b3JlLmdldChDT09LSUVfTkFNRSk/LnZhbHVlO1xyXG4gIGlmICghdG9rZW4pIHJldHVybiBudWxsO1xyXG4gIHJldHVybiB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRTZXNzaW9uKHRva2VuOiBzdHJpbmcpIHtcclxuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICBjb29raWVTdG9yZS5zZXQoQ09PS0lFX05BTUUsIHRva2VuLCB7XHJcbiAgICBodHRwT25seTogdHJ1ZSxcclxuICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiLFxyXG4gICAgc2FtZVNpdGU6IFwibGF4XCIsXHJcbiAgICBtYXhBZ2U6IE1BWF9BR0UsXHJcbiAgICBwYXRoOiBcIi9cIixcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyU2Vzc2lvbigpIHtcclxuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICBjb29raWVTdG9yZS5kZWxldGUoQ09PS0lFX05BTUUpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oKTtcclxuICBpZiAoIXNlc3Npb24pIHJldHVybiBudWxsO1xyXG4gIHJldHVybiBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgIHdoZXJlOiB7IGlkOiBzZXNzaW9uLnVzZXJJZCB9LFxyXG4gICAgc2VsZWN0OiB7XHJcbiAgICAgIGlkOiB0cnVlLFxyXG4gICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICBlbWFpbDogdHJ1ZSxcclxuICAgICAgc2VsZWN0ZWREb21haW46IHRydWUsXHJcbiAgICAgIGpvaW5lZEF0OiB0cnVlLFxyXG4gICAgICByb2xlOiB0cnVlLFxyXG4gICAgfSxcclxuICB9KTtcclxufVxyXG4iXSwibmFtZXMiOlsiand0IiwiY29va2llcyIsImJjcnlwdCIsInByaXNtYSIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiQ09PS0lFX05BTUUiLCJKV1RfRVhQSVJZX1NFQ09ORFMiLCJKV1RfRVhQSVJZIiwiTnVtYmVyIiwiTUFYX0FHRSIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwiaGFzaCIsInZlcmlmeVBhc3N3b3JkIiwiaGFzaGVkIiwiY29tcGFyZSIsImNyZWF0ZVRva2VuIiwicGF5bG9hZCIsInNpZ24iLCJleHBpcmVzSW4iLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwiZGVjb2RlZCIsInZlcmlmeSIsInVzZXJJZCIsImVtYWlsIiwicm9sZSIsImdldFNlc3Npb24iLCJjb29raWVTdG9yZSIsImdldCIsInZhbHVlIiwic2V0U2Vzc2lvbiIsInNldCIsImh0dHBPbmx5Iiwic2VjdXJlIiwic2FtZVNpdGUiLCJtYXhBZ2UiLCJwYXRoIiwiY2xlYXJTZXNzaW9uIiwiZGVsZXRlIiwiZ2V0Q3VycmVudFVzZXIiLCJzZXNzaW9uIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwic2VsZWN0IiwibmFtZSIsInNlbGVjdGVkRG9tYWluIiwiam9pbmVkQXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThDO0FBRTlDLE1BQU1DLGtCQUFrQkM7QUFFakIsTUFBTUMsU0FDWEYsZ0JBQWdCRSxNQUFNLElBQ3RCLElBQUlILHdEQUFZQSxHQUFHO0FBRXJCLElBQUlJLElBQXFDLEVBQUVILGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FidGFsa3MvLi9saWIvZGIudHM/MWRmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcclxuXHJcbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcblxyXG5leHBvcnQgY29uc3QgcHJpc21hID1cclxuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hIHx8XHJcbiAgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/domain-progress.ts":
/*!********************************!*\
  !*** ./lib/domain-progress.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureDomainProgressForUser: () => (/* binding */ ensureDomainProgressForUser),\n/* harmony export */   getOrCreateDomainProgress: () => (/* binding */ getOrCreateDomainProgress)\n/* harmony export */ });\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db */ \"(rsc)/./lib/db.ts\");\n\nasync function getOrCreateDomainProgress(userId, domain) {\n    let progress = await _db__WEBPACK_IMPORTED_MODULE_0__.prisma.domainProgress.findUnique({\n        where: {\n            userId_domain: {\n                userId,\n                domain\n            }\n        }\n    });\n    if (!progress) {\n        progress = await _db__WEBPACK_IMPORTED_MODULE_0__.prisma.domainProgress.create({\n            data: {\n                userId,\n                domain\n            }\n        });\n    }\n    return progress;\n}\nasync function ensureDomainProgressForUser(userId) {\n    const domains = [\n        \"SE\",\n        \"ML\",\n        \"AI\"\n    ];\n    for (const domain of domains){\n        await getOrCreateDomainProgress(userId, domain);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZG9tYWluLXByb2dyZXNzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QjtBQUl2QixlQUFlQywwQkFBMEJDLE1BQWMsRUFBRUMsTUFBYztJQUM1RSxJQUFJQyxXQUFXLE1BQU1KLHVDQUFNQSxDQUFDSyxjQUFjLENBQUNDLFVBQVUsQ0FBQztRQUNwREMsT0FBTztZQUFFQyxlQUFlO2dCQUFFTjtnQkFBUUM7WUFBTztRQUFFO0lBQzdDO0lBQ0EsSUFBSSxDQUFDQyxVQUFVO1FBQ2JBLFdBQVcsTUFBTUosdUNBQU1BLENBQUNLLGNBQWMsQ0FBQ0ksTUFBTSxDQUFDO1lBQzVDQyxNQUFNO2dCQUFFUjtnQkFBUUM7WUFBTztRQUN6QjtJQUNGO0lBQ0EsT0FBT0M7QUFDVDtBQUVPLGVBQWVPLDRCQUE0QlQsTUFBYztJQUM5RCxNQUFNVSxVQUFvQjtRQUFDO1FBQU07UUFBTTtLQUFLO0lBQzVDLEtBQUssTUFBTVQsVUFBVVMsUUFBUztRQUM1QixNQUFNWCwwQkFBMEJDLFFBQVFDO0lBQzFDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hYnRhbGtzLy4vbGliL2RvbWFpbi1wcm9ncmVzcy50cz84NGExIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByaXNtYSB9IGZyb20gXCIuL2RiXCI7XHJcblxyXG50eXBlIERvbWFpbiA9IFwiU0VcIiB8IFwiTUxcIiB8IFwiQUlcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZURvbWFpblByb2dyZXNzKHVzZXJJZDogc3RyaW5nLCBkb21haW46IERvbWFpbikge1xyXG4gIGxldCBwcm9ncmVzcyA9IGF3YWl0IHByaXNtYS5kb21haW5Qcm9ncmVzcy5maW5kVW5pcXVlKHtcclxuICAgIHdoZXJlOiB7IHVzZXJJZF9kb21haW46IHsgdXNlcklkLCBkb21haW4gfSB9LFxyXG4gIH0pO1xyXG4gIGlmICghcHJvZ3Jlc3MpIHtcclxuICAgIHByb2dyZXNzID0gYXdhaXQgcHJpc21hLmRvbWFpblByb2dyZXNzLmNyZWF0ZSh7XHJcbiAgICAgIGRhdGE6IHsgdXNlcklkLCBkb21haW4gfSxcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gcHJvZ3Jlc3M7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnN1cmVEb21haW5Qcm9ncmVzc0ZvclVzZXIodXNlcklkOiBzdHJpbmcpIHtcclxuICBjb25zdCBkb21haW5zOiBEb21haW5bXSA9IFtcIlNFXCIsIFwiTUxcIiwgXCJBSVwiXTtcclxuICBmb3IgKGNvbnN0IGRvbWFpbiBvZiBkb21haW5zKSB7XHJcbiAgICBhd2FpdCBnZXRPckNyZWF0ZURvbWFpblByb2dyZXNzKHVzZXJJZCwgZG9tYWluKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbInByaXNtYSIsImdldE9yQ3JlYXRlRG9tYWluUHJvZ3Jlc3MiLCJ1c2VySWQiLCJkb21haW4iLCJwcm9ncmVzcyIsImRvbWFpblByb2dyZXNzIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwidXNlcklkX2RvbWFpbiIsImNyZWF0ZSIsImRhdGEiLCJlbnN1cmVEb21haW5Qcm9ncmVzc0ZvclVzZXIiLCJkb21haW5zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/domain-progress.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/bcryptjs","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchallenge%2Froute&page=%2Fapi%2Fchallenge%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchallenge%2Froute.ts&appDir=D%3A%5CABtalks%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CABtalks&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();